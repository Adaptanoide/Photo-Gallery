<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Sunshine Cowhides</title>

    <!-- CSS Base + Admin -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin-dashboard.css">
    <link rel="stylesheet" href="css/admin-components.css">
    <link rel="stylesheet" href="css/admin-clients.css">
    <link rel="stylesheet" href="css/pricing-management.css">
    <link rel="stylesheet" href="css/admin-config.css">
    <link rel="stylesheet" href="css/admin-selections.css">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body class="admin-body">
    <!-- Overlay para mobile -->
    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <!-- Layout Principal -->
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside id="adminSidebar" class="admin-sidebar">
            <!-- Header da Sidebar -->
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-sun"></i>
                    <span>Admin Panel</span>
                </div>
            </div>

            <!-- Navegação -->
            <nav class="sidebar-nav">
                <div class="nav-item">
                    <a href="#dashboard" class="nav-link active" data-section="dashboard">
                        <i class="fas fa-chart-line"></i>
                        <span class="nav-text">Dashboard</span>
                    </a>
                </div>

                <div class="nav-item">
                    <a href="#clients" class="nav-link" data-section="clients">
                        <i class="fas fa-users"></i>
                        <span class="nav-text">Client Management</span>
                        <span class="nav-badge" id="clientsBadge" style="display: none;">0</span>
                    </a>
                </div>

                <div class="nav-item">
                    <a href="#pricing" class="nav-link" data-section="pricing">
                        <i class="fas fa-dollar-sign"></i>
                        <span class="nav-text">Price Management</span>
                        <span class="nav-badge" id="pricingBadge" style="display: none;">0</span>
                    </a>
                </div>

                <div class="nav-item">
                    <a href="#selections" class="nav-link" data-section="selections">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="nav-text">Selection Management</span>
                        <span class="nav-badge" id="selectionsBadge" style="display: none;">0</span>
                    </a>
                </div>

                <div class="nav-item">
                    <a href="#reports" class="nav-link" data-section="reports">
                        <i class="fas fa-chart-bar"></i>
                        <span class="nav-text">Reports</span>
                    </a>
                </div>

                <div class="nav-item">
                    <a href="#settings" class="nav-link" data-section="settings">
                        <i class="fas fa-cog"></i>
                        <span class="nav-text">Settings</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Área Principal -->
        <main id="adminMain" class="admin-main">
            <!-- Header Principal -->
            <header class="admin-header">
                <div class="header-left">
                    <button id="sidebarToggle" class="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="pageTitle" class="page-title">Dashboard</h1>
                </div>

                <div class="header-right">
                    <div class="admin-user">
                        <div class="user-avatar" id="userAvatar">A</div>
                        <span class="user-name" id="userName">Admin</span>
                    </div>
                    <button onclick="logout()" class="btn btn-primary">
                        <i class="fas fa-sign-out-alt"></i>
                        <span class="btn-text">Logout</span>
                    </button>
                </div>
            </header>

            <!-- Conteúdo Principal -->
            <div class="admin-content">
                <!-- Seção Dashboard -->
                <div id="section-dashboard" class="content-section active">
                    <!-- Cards de Estatísticas -->
                    <div class="stats-grid">
                        <!-- Card: Total de Clientes -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <div class="stat-title">Total Clients</div>
                                    <div class="stat-value" id="totalClients">-</div>
                                    <div class="stat-description">Active codes in system</div>
                                </div>
                                <div class="stat-icon primary">
                                    <i class="fas fa-users"></i>
                                </div>
                            </div>
                            <div class="stat-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>+12% this month</span>
                            </div>
                        </div>

                        <!-- Card: Produtos Disponíveis -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <div class="stat-title">Available Products</div>
                                    <div class="stat-value" id="availableProducts">-</div>
                                    <div class="stat-description">Photos ready for sale</div>
                                </div>
                                <div class="stat-icon success">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div class="stat-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>+5% this week</span>
                            </div>
                        </div>

                        <!-- Card: Produtos Reservados -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <div class="stat-title">Reserved Products</div>
                                    <div class="stat-value" id="reservedProducts">-</div>
                                    <div class="stat-description">In active carts</div>
                                </div>
                                <div class="stat-icon warning">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div class="stat-trend">
                                <i class="fas fa-minus"></i>
                                <span>Stable</span>
                            </div>
                        </div>

                        <!-- Card: Seleções Pendentes -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <div class="stat-title">Pending Selections</div>
                                    <div class="stat-value" id="pendingSelections">-</div>
                                    <div class="stat-description">Awaiting contact</div>
                                </div>
                                <div class="stat-icon secondary">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                            </div>
                            <div class="stat-trend trend-down">
                                <i class="fas fa-arrow-down"></i>
                                <span>-3% today</span>
                            </div>
                        </div>
                    </div>

                    <!-- Tabela: Últimas Seleções -->
                    <div class="data-table-container">
                        <div class="table-header">
                            <h3 class="table-title">Recent Selections</h3>
                            <div class="table-actions">
                                <button class="btn btn-secondary">
                                    <i class="fas fa-download"></i>
                                    Export
                                </button>
                                <button class="btn btn-primary">
                                    <i class="fas fa-plus"></i>
                                    New Selection
                                </button>
                            </div>
                        </div>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Client</th>
                                    <th>Code</th>
                                    <th>Items</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="recentSelectionsTable">
                                <!-- Dados serão carregados via JavaScript -->
                                <tr>
                                    <td colspan="6" class="text-center">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Loading data...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Tabela: Produtos Mais Reservados -->
                    <div class="data-table-container">
                        <div class="table-header">
                            <h3 class="table-title">Most Reserved Products</h3>
                            <div class="table-actions">
                                <button class="btn btn-secondary">
                                    <i class="fas fa-filter"></i>
                                    Filter
                                </button>
                            </div>
                        </div>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Photo</th>
                                    <th>Category</th>
                                    <th>Reservations</th>
                                    <th>Last Reservation</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="popularProductsTable">
                                <!-- Dados serão carregados via JavaScript -->
                                <tr>
                                    <td colspan="5" class="text-center">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Loading products...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Seção Clientes (Hidden por padrão) -->
                <div id="section-clients" class="content-section" style="display: none;">
                    <h2>Client Management - In Development</h2>
                    <p>This section will be implemented in the next phase.</p>
                </div>

                <div id="section-pricing" class="content-section" style="display: none;">
                    <!-- Cabeçalho da Seção de Preços -->
                    <div class="pricing-section-header">
                        <h2 class="pricing-title">
                            <i class="fas fa-dollar-sign"></i>
                            Price Management
                        </h2>
                        <div class="pricing-actions">
                            <button id="btnSyncDrive" class="btn btn-secondary">
                                <i class="fas fa-sync-alt"></i>
                                Sync Google Drive
                            </button>
                            <button id="btnPricingReport" class="btn btn-primary">
                                <i class="fas fa-chart-line"></i>
                                Report
                            </button>
                        </div>
                    </div>

                    <!-- Status da Sincronização -->
                    <div id="syncStatusCard" class="sync-status-card" style="display: none;">
                        <div class="sync-status-content">
                            <div class="sync-status-info">
                                <h4><i class="fas fa-info-circle"></i> Sync Status</h4>
                                <p id="syncStatusMessage">Checking status...</p>
                            </div>
                            <div class="sync-status-actions">
                                <button id="btnForcSync" class="btn btn-warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    Force Sync
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Filtros -->
                    <div class="pricing-filters">
                        <div class="filters-row">
                            <div class="filter-group">
                                <label class="filter-label">Search Category</label>
                                <input type="text" id="searchCategories" class="filter-input"
                                    placeholder="Category name, path...">
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Price Status</label>
                                <select id="filterPriceStatus" class="filter-select">
                                    <option value="all">All</option>
                                    <option value="with-price">With Price</option>
                                    <option value="without-price">Without Price</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Sort by</label>
                                <select id="sortCategories" class="filter-select">
                                    <option value="name">Name A-Z</option>
                                    <option value="price-high">Highest Price</option>
                                    <option value="price-low">Lowest Price</option>
                                    <option value="photos">Most Photos</option>
                                </select>
                            </div>
                            <button id="btnApplyPricingFilters" class="btn-filter">
                                <i class="fas fa-filter"></i>
                                Filter
                            </button>
                        </div>
                    </div>

                    <!-- Estatísticas Rápidas -->
                    <div id="pricingStats" class="pricing-stats" style="display: none;">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-header">
                                    <div>
                                        <div class="stat-title">Total Categories</div>
                                        <div class="stat-value" id="totalCategoriesCount">-</div>
                                        <div class="stat-description">Folders with photos</div>
                                    </div>
                                    <div class="stat-icon primary">
                                        <i class="fas fa-folder"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div>
                                        <div class="stat-title">With Price Set</div>
                                        <div class="stat-value" id="categoriesWithPriceCount">-</div>
                                        <div class="stat-description">Priced categories</div>
                                    </div>
                                    <div class="stat-icon success">
                                        <i class="fas fa-dollar-sign"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div>
                                        <div class="stat-title">Without Price</div>
                                        <div class="stat-value" id="categoriesWithoutPriceCount">-</div>
                                        <div class="stat-description">Need pricing</div>
                                    </div>
                                    <div class="stat-icon warning">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div>
                                        <div class="stat-title">Total Photos</div>
                                        <div class="stat-value" id="totalPhotosCount">-</div>
                                        <div class="stat-description">In all categories</div>
                                    </div>
                                    <div class="stat-icon secondary">
                                        <i class="fas fa-images"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de Categorias com Preços -->
                    <div class="pricing-table-container">
                        <div class="table-header">
                            <h3 class="table-title">Categories and Prices</h3>
                            <div class="table-actions">
                                <button id="btnBulkPricing" class="btn btn-secondary">
                                    <i class="fas fa-edit"></i>
                                    Bulk Edit
                                </button>
                                <button id="btnExportPricing" class="btn btn-primary">
                                    <i class="fas fa-download"></i>
                                    Export
                                </button>
                            </div>
                        </div>

                        <table class="pricing-table">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Drive Path</th>
                                    <th>Photos</th>
                                    <th>Base Price</th>
                                    <th>Discounts</th>
                                    <th>Last Update</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pricingTableBody">
                                <tr>
                                    <td colspan="7" class="text-center">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Loading categories...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Paginação -->
                    <div id="pricingPagination" class="pricing-pagination" style="display: none;">
                        <button id="btnPrevPage" class="btn btn-secondary">
                            <i class="fas fa-chevron-left"></i>
                            Previous
                        </button>
                        <span id="paginationInfo">Page 1 of 1</span>
                        <button id="btnNextPage" class="btn btn-secondary">
                            Next
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <!-- ===== MODAL DE EDIÇÃO DE PREÇO ===== -->
                <div id="priceModal" class="price-modal" style="display: none;">
                    <div class="price-modal-overlay"></div>
                    <div class="price-modal-content">
                        <div class="price-modal-header">
                            <h3 class="modal-title">
                                <i class="fas fa-dollar-sign"></i>
                                <span id="priceModalTitle">Set Price</span>
                            </h3>
                            <button class="modal-close" onclick="closePriceModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>

                        <div class="price-modal-body">
                            <div class="category-info">
                                <h4 id="modalCategoryName">Category Name</h4>
                                <p id="modalCategoryPath">Google Drive Path</p>
                                <div class="category-stats">
                                    <span id="modalPhotoCount">0 photos</span>
                                    <span id="modalCurrentPrice">Current price: $0.00</span>
                                </div>
                            </div>

                            <!-- NOVO: Sistema de Abas -->
                            <div class="price-tabs">
                                <nav class="price-tabs-nav">
                                    <button type="button" class="price-tab-btn active" data-tab="base-price">
                                        💰 Base Price
                                    </button>
                                    <button type="button" class="price-tab-btn" data-tab="client-prices">
                                        👤 By Client
                                    </button>
                                    <button type="button" class="price-tab-btn" data-tab="quantity-discounts">
                                        📦 By Quantity
                                    </button>
                                </nav>

                                <div class="price-tabs-content">
                                    <!-- ABA 1: Preço Base (formulário atual) -->
                                    <div class="price-tab-panel active" id="tab-base-price">
                                        <form id="priceForm" class="price-form">
                                            <div class="form-group">
                                                <label class="form-label">New Price ($)</label>
                                                <input type="number" id="newPrice" class="form-input" min="0"
                                                    step="0.01" placeholder="0.00" required>
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">Reason for Change (Optional)</label>
                                                <textarea id="priceReason" class="form-textarea" rows="3"
                                                    placeholder="Ex: Market adjustment, promotion..."></textarea>
                                            </div>
                                        </form>
                                    </div>

                                    <!-- ABA 2: Preços por Cliente -->
                                    <div class="price-tab-panel" id="tab-client-prices">
                                        <div class="client-prices-section">
                                            <h5>Custom Prices by Client</h5>
                                            <p class="text-muted">Configure special prices for specific clients</p>

                                            <!-- Lista de regras existentes -->
                                            <div id="clientRulesList" class="client-rules-list">
                                                <!-- Será populado via JavaScript -->
                                            </div>

                                            <!-- Formulário para nova regra -->
                                            <div class="add-client-rule">
                                                <h6>Add New Rule</h6>
                                                <form id="clientRuleForm" class="client-rule-form">
                                                    <div class="form-row">
                                                        <div class="form-group">
                                                            <label class="form-label">Client</label>
                                                            <select id="clientSelect" class="form-input" required>
                                                                <option value="">Select a client...</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="form-label">Discount Type</label>
                                                            <select id="discountType" class="form-input" required>
                                                                <option value="">Select...</option>
                                                                <option value="percentage">Percentage Discount</option>
                                                                <option value="custom">Custom Price</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="form-row">
                                                        <div class="form-group" id="percentageGroup"
                                                            style="display: none;">
                                                            <label class="form-label">Discount (%)</label>
                                                            <input type="number" id="discountPercent" class="form-input"
                                                                min="0" max="100" step="1" placeholder="10">
                                                        </div>
                                                        <div class="form-group" id="customPriceGroup"
                                                            style="display: none;">
                                                            <label class="form-label">Custom Price ($)</label>
                                                            <input type="number" id="customPrice" class="form-input"
                                                                min="0" step="0.01" placeholder="0.00">
                                                        </div>
                                                    </div>

                                                    <button type="submit" class="btn btn-primary">
                                                        <i class="fas fa-plus"></i>
                                                        Add Rule
                                                    </button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- ABA 3: Descontos por Quantidade -->
                                    <div class="price-tab-panel" id="tab-quantity-discounts">
                                        <div class="quantity-discounts-section">
                                            <h5>Quantity Discounts</h5>
                                            <p class="text-muted">Configure automatic discounts based on photo quantity</p>

                                            <div class="quantity-rules">
                                                <div class="quantity-rule">
                                                    <div class="rule-range">5-10 photos</div>
                                                    <div class="rule-discount">5% discount</div>
                                                    <div class="rule-actions">
                                                        <button class="btn-sm btn-warning">Edit</button>
                                                        <button class="btn-sm btn-danger">Remove</button>
                                                    </div>
                                                </div>

                                                <div class="quantity-rule">
                                                    <div class="rule-range">11-20 photos</div>
                                                    <div class="rule-discount">10% discount</div>
                                                    <div class="rule-actions">
                                                        <button class="btn-sm btn-warning">Edit</button>
                                                        <button class="btn-sm btn-danger">Remove</button>
                                                    </div>
                                                </div>

                                                <div class="quantity-rule">
                                                    <div class="rule-range">21+ photos</div>
                                                    <div class="rule-discount">15% discount</div>
                                                    <div class="rule-actions">
                                                        <button class="btn-sm btn-warning">Edit</button>
                                                        <button class="btn-sm btn-danger">Remove</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <button class="btn btn-secondary">
                                                <i class="fas fa-plus"></i>
                                                New Quantity Rule
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="price-modal-footer">
                            <button type="button" class="btn btn-secondary" onclick="closePriceModal()">
                                <i class="fas fa-times"></i>
                                Cancel
                            </button>
                            <button type="submit" form="priceForm" class="btn btn-primary" id="btnSavePrice">
                                <i class="fas fa-save"></i>
                                Save Price
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Seção Seleções -->
                <div id="section-selections" class="content-section" style="display: none;">
                    <!-- Cabeçalho -->
                    <div class="selections-section-header">
                        <h2 class="selections-title">
                            <i class="fas fa-shopping-cart"></i>
                            Selection Management
                        </h2>
                        <div class="selections-actions">
                            <button id="btnRefreshSelections" class="btn btn-secondary">
                                <i class="fas fa-sync-alt"></i>
                                Refresh
                            </button>
                        </div>
                    </div>

                    <!-- Filtros -->
                    <div class="selections-filters">
                        <div class="filters-row">
                            <div class="filter-group">
                                <label class="filter-label">Status</label>
                                <select id="filterSelectionStatus" class="filter-select">
                                    <option value="pending">Pending</option>
                                    <option value="confirmed">Confirmed</option>
                                    <option value="cancelled">Cancelled</option>
                                    <option value="finalized">Finalized</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Client</label>
                                <input type="text" id="searchSelectionClient" class="filter-input" 
                                    placeholder="Code or client name...">
                            </div>
                            <button id="btnApplySelectionFilters" class="btn-filter">
                                <i class="fas fa-filter"></i>
                                Filter
                            </button>
                        </div>
                    </div>

                    <!-- Tabela de Seleções -->
                    <div class="selections-table-container">
                        <div class="table-header">
                            <h3 class="table-title">Client Selections</h3>
                        </div>

                        <table class="selections-table">
                            <thead>
                                <tr>
                                    <th>Selection ID</th>
                                    <th>Client</th>
                                    <th>Items</th>
                                    <th>Total Value</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="selectionsTableBody">
                                <tr>
                                    <td colspan="7" class="text-center">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Loading selections...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Seção Relatórios (Hidden por padrão) -->
                <div id="section-reports" class="content-section" style="display: none;">
                    <h2>Reports - In Development</h2>
                    <p>This section will be implemented in the next phase.</p>
                </div>

                <!-- Seção Configurações (Hidden por padrão) -->
                <div id="section-settings" class="content-section" style="display: none;">
                    <!-- Loading -->
                    <div id="configLoading" class="loading-section">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin fa-2x"></i>
                        </div>
                        <p>Loading settings...</p>
                    </div>

                    <!-- Erro -->
                    <div id="configError" class="error-section" style="display: none;">
                        <div class="error-content">
                            <i class="fas fa-exclamation-triangle fa-2x"></i>
                            <h3>Error Loading Settings</h3>
                            <p id="errorMessage">Unknown error</p>
                            <button onclick="location.reload()" class="btn btn-primary">
                                <i class="fas fa-sync"></i>
                                Try Again
                            </button>
                        </div>
                    </div>

                    <!-- Conteúdo Principal -->
                    <div id="configContent" style="display: none;">
                        <!-- Cabeçalho -->
                        <div class="config-header">
                            <h2 class="config-title">
                                <i class="fas fa-cog"></i>
                                System Settings
                            </h2>
                            <p class="config-description">
                                Configure email and notification settings for the system
                            </p>
                        </div>

                        <!-- Estatísticas -->
                        <div class="config-stats">
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-header">
                                        <div>
                                            <div class="stat-title">Emails Sent</div>
                                            <div class="stat-value" id="totalEmailsSent">-</div>
                                            <div class="stat-description">Total notifications</div>
                                        </div>
                                        <div class="stat-icon primary">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                    </div>
                                </div>

                                <div class="stat-card">
                                    <div class="stat-header">
                                        <div>
                                            <div class="stat-title">Last Email</div>
                                            <div class="stat-value" id="lastEmailSent">-</div>
                                            <div class="stat-description">Date of last email</div>
                                        </div>
                                        <div class="stat-icon success">
                                            <i class="fas fa-clock"></i>
                                        </div>
                                    </div>
                                </div>

                                <div class="stat-card">
                                    <div class="stat-header">
                                        <div>
                                            <div class="stat-title">Configuration Status</div>
                                            <div class="stat-value" id="configStatus">-</div>
                                            <div class="stat-description">Current state</div>
                                        </div>
                                        <div class="stat-icon warning">
                                            <i class="fas fa-cog"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Configuração SMTP -->
                        <div class="config-section">
                            <div class="config-section-header">
                                <h3>
                                    <i class="fas fa-server"></i>
                                    SMTP Configuration
                                </h3>
                                <p>Configure email server for sending notifications</p>
                            </div>

                            <form id="smtpConfigForm" class="config-form">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">SMTP Server</label>
                                        <input type="text" id="smtpHost" name="host" class="form-input"
                                            placeholder="smtp.gmail.com" required>
                                        <small class="form-help">Ex: smtp.gmail.com, smtp.outlook.com</small>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Port</label>
                                        <input type="number" id="smtpPort" name="port" class="form-input"
                                            placeholder="587" value="587" required>
                                        <small class="form-help">Default: 587 (STARTTLS)</small>
                                    </div>
                                </div>

                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">Sender Email</label>
                                        <input type="email" id="smtpUser" name="user" class="form-input"
                                            placeholder="system@sunshine.com" required>
                                        <small class="form-help">Email that will be used to send</small>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Email Password</label>
                                        <input type="password" id="smtpPass" name="pass" class="form-input"
                                            placeholder="********" required>
                                        <small class="form-help">Use app password for Gmail</small>
                                    </div>
                                </div>

                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">Sender Name</label>
                                        <input type="text" id="senderName" name="senderName" class="form-input"
                                            placeholder="Sunshine Cowhides" required>
                                        <small class="form-help">Name that appears in email</small>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Reply Email</label>
                                        <input type="email" id="senderEmail" name="senderEmail" class="form-input"
                                            placeholder="noreply@sunshine.com" required>
                                        <small class="form-help">Reply email (can be the same)</small>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button type="button" onclick="testConnection()" class="btn btn-secondary">
                                        <i class="fas fa-plug"></i>
                                        Test Connection
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i>
                                        Save Configuration
                                    </button>
                                </div>
                            </form>
                        </div>

                        <!-- Teste de Email -->
                        <div class="config-section">
                            <div class="config-section-header">
                                <h3>
                                    <i class="fas fa-paper-plane"></i>
                                    Email Test
                                </h3>
                                <p>Send a test email to verify it's working</p>
                            </div>

                            <div class="test-email-form">
                                <div class="form-group">
                                    <label class="form-label">Test Email</label>
                                    <div class="input-group">
                                        <input type="email" id="testEmail" class="form-input"
                                            placeholder="youremail@test.com">
                                        <button type="button" onclick="sendTestEmail()" class="btn btn-primary">
                                            <i class="fas fa-paper-plane"></i>
                                            Send Test
                                        </button>
                                    </div>
                                    <small class="form-help">Enter an email to send a test</small>
                                </div>
                            </div>
                        </div>

                        <!-- Destinatários das Notificações -->
                        <div class="config-section">
                            <div class="config-section-header">
                                <h3>
                                    <i class="fas fa-users"></i>
                                    Notification Recipients
                                </h3>
                                <p>Configure who receives emails when clients finalize selections</p>
                            </div>

                            <!-- Lista de Destinatários -->
                            <div class="recipients-section">
                                <h4>Current Recipients</h4>
                                <div id="recipientsList" class="recipients-list">
                                    <p class="no-recipients">No recipients configured</p>
                                </div>
                            </div>

                            <!-- Adicionar Destinatário -->
                            <div class="add-recipient-section">
                                <h4>Add New Recipient</h4>
                                <div class="add-recipient-form">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label class="form-label">Name</label>
                                            <input type="text" id="newRecipientName" class="form-input"
                                                placeholder="John Silva">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Email</label>
                                            <input type="email" id="newRecipientEmail" class="form-input"
                                                placeholder="john@sunshine.com">
                                        </div>
                                    </div>
                                    <button type="button" onclick="addRecipient('newSelection')"
                                        class="btn btn-success">
                                        <i class="fas fa-plus"></i>
                                        Add Recipient
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Global -->
    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/admin-dashboard.js"></script>
    <script src="js/admin-clients.js"></script>
    <script src="js/admin-pricing.js"></script>
    <script src="js/admin-selections.js"></script>
    <script src="js/admin-config.js"></script>
    
    
</body>

</html>